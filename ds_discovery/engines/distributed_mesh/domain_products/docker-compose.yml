version: '3.8'
services:
  domain-controller:
    image: projecthadron/controller:0.1.6
#    volumes:
#      - ../data/members:/var/data
    environment:
      # Hadron Domain config
      HADRON_PM_REPO: https://raw.githubusercontent.com/project-hadron/hadron-asset-bank/master/contracts/healthcare/datalake_gen/members/
      HADRON_DEFAULT_PATH: s3://project-hadron-cs-repo/datalake_gen/healthcare/members

      # AWS envs
      AWS_ACCESS_KEY_ID: ${AWS_ACCESS_KEY_ID}
      AWS_SECRET_ACCESS_KEY: ${AWS_SECRET_ACCESS_KEY}

### To look at the content of a Domain Contract instantiate the controller
# $> python
# >>> from ds_engines import Controller
# >>> controller = Controller.from_env(uri_pm_repo="", default_save=False)
# >>> controller.report_tasks(stylise=False)
# >>> controller.report_run_book(stylise=False)

"""
$> cortex secrets save AWS_ACCESS_KEY_ID <key> --project <project_name>
$> cortex secrets save AWS_SECRET_ACCESS_KEY <secret> --project <project_name>

Deploy:
$> deploy.sh

runtime configuration Yaml:
$> vi skill.yaml

save the skill:
$> cortex skills save -y skill.yaml --project <project_name>

Now go to the UI and create the Agent with that skill inside.

"""